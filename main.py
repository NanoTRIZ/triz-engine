import streamlit as st
import openai

# --- –ù–ê–°–¢–†–û–ô–ö–ò –°–¢–†–ê–ù–ò–¶–´ ---
st.set_page_config(page_title="NanoTRIZ Lab", layout="wide", page_icon="üß¨")

# --- –ë–û–ö–û–í–û–ï –ú–ï–ù–Æ (SIDEBAR) ---
with st.sidebar:
    st.title("üß¨ NanoTRIZ Lab")
    st.write("Fellowship Dashboard v1.0")
    
    # –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    page = st.radio(
        "–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å:",
        ["üè† –ì–ª–∞–≤–Ω–∞—è", "üöÄ Innovation Engine", "üß≠ Career Compass", "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"]
    )
    
    st.divider()
    
    # –í–≤–æ–¥ –∫–ª—é—á–∞ (—á—Ç–æ–±—ã –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –≤ –∫–æ–¥–µ)
    api_key = st.text_input("–í–≤–µ–¥–∏—Ç–µ OpenAI API Key", type="password")
    if api_key:
        openai.api_key = api_key
        st.success("–ö–ª—é—á –ø—Ä–∏–Ω—è—Ç! ‚úÖ")
    else:
        st.warning("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –¥–ª—è —Ä–∞–±–æ—Ç—ã –ò–ò")

    st.divider()
    st.markdown("[‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç –ò–Ω—Å—Ç–∏—Ç—É—Ç–∞](https://www.nanotriz.com)")

# --- –°–¢–†–ê–ù–ò–¶–ê: –ì–õ–ê–í–ù–ê–Ø ---
if page == "üè† –ì–ª–∞–≤–Ω–∞—è":
    st.title("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é üéì")
    st.markdown("""
    –≠—Ç–æ –≤–∞—à–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:
    * **–ò–∑–æ–±—Ä–µ—Ç–∞—Ç—å** –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å –ø–æ–º–æ—â—å—é –¢–†–ò–ó.
    * **–°—Ç—Ä–æ–∏—Ç—å –∫–∞—Ä—å–µ—Ä—É** —Å –ø–æ–º–æ—â—å—é –ò–ò-–Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞.
    * **–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞—É—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ (—Å–∫–æ—Ä–æ).
    
    –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ –º–µ–Ω—é —Å–ª–µ–≤–∞ üëà
    """)
    
    col1, col2, col3 = st.columns(3)
    col1.metric("–°—Ç–∞—Ç—É—Å", "Fellow Member", "Active")
    col2.metric("–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤", "Unlimited")
    col3.metric("–ü—Ä–æ–µ–∫—Ç–æ–≤", "0")

# --- –°–¢–†–ê–ù–ò–¶–ê: INNOVATION ENGINE ---
elif page == "üöÄ Innovation Engine":
    st.title("üöÄ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ò–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–π (TRIZ)")
    st.info("–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É, –∏ –ò–ò –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 40 –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –¢–†–ò–ó.")
    
    problem = st.text_area("–û–ø–∏—à–∏—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É:", height=150, 
                          placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Å–æ–ª–Ω–µ—á–Ω—É—é –ø–∞–Ω–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è —Å–∞–º–∞ –æ—á–∏—â–∞–µ—Ç—Å—è –æ—Ç –ø—ã–ª–∏?")
    
    if st.button("üöÄ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ"):
        if not api_key:
            st.error("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ API Key –≤ –º–µ–Ω—é —Å–ª–µ–≤–∞!")
        elif not problem:
            st.warning("–°–Ω–∞—á–∞–ª–∞ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É.")
        else:
            with st.spinner("–ò–ò –¥—É–º–∞–µ—Ç –ø–æ –º–µ—Ç–æ–¥—É –ê–ª—å—Ç—à—É–ª–ª–µ—Ä–∞..."):
                try:
                    # –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –∫ GPT (–º–æ–∂–Ω–æ —É—Å–ª–æ–∂–Ω–∏—Ç—å –ø–æ–∑–∂–µ)
                    response = openai.chat.completions.create(
                        model="gpt-4",
                        messages=[
                            {"role": "system", "content": "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –¢–†–ò–ó. –ü—Ä–µ–¥–ª–æ–∂–∏ 3 –∏–¥–µ–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–Ω—Ü–∏–ø—ã –¢–†–ò–ó. –ë—É–¥—å –∫—Ä–∞—Ç–æ–∫ –∏ –∫–æ–Ω–∫—Ä—Ç–µ—Ç–µ–Ω."},
                            {"role": "user", "content": problem}
                        ]
                    )
                    st.success("–ì–æ—Ç–æ–≤–æ! –í–æ—Ç –∏–¥–µ–∏:")
                    st.write(response.choices[0].message.content)
                except Exception as e:
                    st.error(f"–û—à–∏–±–∫–∞: {e}")

# --- –°–¢–†–ê–ù–ò–¶–ê: CAREER COMPASS ---
elif page == "üß≠ Career Compass":
    st.title("üß≠ –ö–∞—Ä—å–µ—Ä–Ω—ã–π –ù–∞–≤–∏–≥–∞—Ç–æ—Ä")
    st.write("–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ —Ä–µ–∑—é–º–µ, –∏ –º—ã –Ω–∞–π–¥–µ–º –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—É—é PhD –ø–æ–∑–∏—Ü–∏—é (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).")
    st.file_uploader("–ó–∞–≥—Ä—É–∑–∏—Ç—å CV (PDF)", type="pdf")

# --- –°–¢–†–ê–ù–ò–¶–ê: –ù–ê–°–¢–†–û–ô–ö–ò ---
elif page == "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏":
    st.title("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è")
    st.text_input("–í–∞—à–µ –ò–º—è", value="Student")
    st.text_input("–í–∞—à–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å", value="Engineering")
    st.button("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
